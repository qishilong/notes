# Guessing_game

#### ä¸ºäº†èŽ·å–ç”¨æˆ·çš„è¾“å…¥è¾“å‡ºï¼Œéœ€è¦ä½¿ç”¨ io è¾“å…¥è¾“å‡ºåº“

```rust
use std::io;
```

io è¿™ä¸ªåº“æ¥è‡ªäºŽ stdï¼Œæ‰€ä»¥ä»Ž std ä¸­å¯¼å…¥

rust ç¨‹åºä¸­å¦‚æžœä½¿ç”¨çš„ç±»åž‹ä¸åœ¨èŒƒå›´ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ `use` è¯­å¥æ˜¾ç¤ºçš„å°†è¯¥ç±»åž‹å¼•å…¥èŒƒå›´

`std::io` åº“æä¾›å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æŽ¥å—ç”¨æˆ·çš„è¾“å…¥è¾“å‡º

#### `main` å‡½æ•°æ—¶ç¨‹åºçš„å…¥å£

`fn` è¯­æ³•å£°æ˜Žä¸€ä¸ªæ–°å‡½æ•°

`println!` æ˜¯ä¸€ä¸ªå°†å­—ç¬¦ä¸²æ‰“å°åˆ°å±å¹•ä¸Šçš„å®

#### å¯ä»¥ä½¿ç”¨ `let` åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼Œ`Rust` ä¸­é»˜è®¤å˜é‡æ˜¯ä¸å¯å˜çš„ï¼Œæ„å‘³ç€ä¸€æ—¦æˆ‘ä»¬ç»™å˜é‡èµ‹äºŽäº†å€¼ï¼Œè¯¥å€¼å°±ä¸ä¼šæ”¹å˜ã€‚

ä¸ºäº†ä½¿å˜é‡å¯å˜ï¼Œåœ¨å˜é‡åå‰æ·»åŠ  `mut` 

```rust
let apple = 5; // immutable
let mut bananas = 5; // mutable
```

`//` æ³¨é‡Šè¯­æ³•

#### `String` æ˜¯æ ‡å‡†åº“æä¾›çš„å­—ç¬¦ä¸²ç±»åž‹ï¼Œå®ƒæ˜¯å¯å¢žé•¿çš„ `UTF-8` ç¼–ç æ–‡æœ¬ä½ã€‚

```rust
let mut guess = String::new(); // åˆ›å»ºäº†ä¸€ä¸ªå¯å˜å˜é‡ï¼Œè¯¥å˜é‡å½“å‰ç»‘å®šåˆ° String çš„æ–°ç©ºå®žä¾‹
```

`::new()` ä¸­çš„ `::` è¯­æ³•è¡¨ç¤º `new` æ˜¯ `String` ç±»åž‹çš„å…³è”å‡½æ•°ã€‚å…³è”å‡½æ•°æ˜¯åœ¨ç±»åž‹ä¸Šå®žçŽ°çš„å‡½æ•°ï¼Œåœ¨æ­¤ä¸º `String` ã€‚æ­¤ `new` å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚`new` æ˜¯ç”ŸæˆæŸç§æ–°å€¼çš„å‡½æ•°çš„é€šç”¨åç§°ã€‚

#### ä»Ž `io` æ¨¡å—ä¸­è°ƒç”¨ `stdin` å‡½æ•°äº†ï¼Œå…è®¸æˆ‘ä»¬å¤„ç†ç”¨æˆ·è¾“å…¥

```rust
io::stdin().read_line(&mut guess)
```

ä¹Ÿå¯ä»¥é€šè¿‡ `std::io::stdin` æ¥ä½¿ç”¨è¯¥å‡½æ•°ã€‚`stdin` å‡½æ•°è¿”å›ž `std::io::Stdin` çš„å®žä¾‹ï¼Œå®ƒæ˜¯è¡¨ç¤ºç»ˆç«¯æ ‡å‡†è¾“å…¥å¥å­çš„ç±»åž‹ã€‚

`.read_line(&mut guess)` è°ƒç”¨æ ‡å‡†è¾“å…¥å¥æŸ„ä¸Šçš„ `read_line` æ–¹æ³•ä»¥èŽ·å–ç”¨æˆ·çš„è¾“å…¥ã€‚åŒæ—¶å°† `&mut guess` ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `read_line` ï¼Œå‘Šè¯‰å®ƒå­˜å‚¨ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ã€‚ `read_line` çš„å®Œæ•´å·¥ä½œæ˜¯èŽ·å–ä»»ä½•ç”¨æˆ·è¾“å…¥çš„å†…å®¹å¹¶å°†å…¶é™„åŠ åˆ°å­—ç¬¦ä¸²ä¸­ï¼ˆä¸è¦†ç›–å…¶å†…å®¹ï¼‰ï¼Œå› æ­¤å°†è¯¥å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ é€’ã€‚

`&` è¡¨ç¤ºè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œå¼•ç”¨å¯ä»¥è¾¾åˆ°ä»£ç çš„å¤šä¸ªéƒ¨åˆ†è®¿é—®ä¸€æ¡æ•°æ®çš„æ–¹æ³•ï¼Œè€Œæ— éœ€å¤šæ¬¡å°†è¯¥æ•°æ®å¤åˆ¶åˆ°å†…å­˜ä¸­ã€‚

`Rust` çš„ä¸»è¦ä¼˜ç‚¹ä¹‹ä¸€æ˜¯ä½¿ç”¨å¼•ç”¨çš„å®‰å…¨æ€§å’Œæ˜“ç”¨æ€§ã€‚

ä¸Žå˜é‡ä¸€æ ·ï¼Œé»˜è®¤æƒ…å†µä¸‹å¼•ç”¨æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤éœ€è¦ç¼–å†™ `&mut guess` è€Œä¸æ˜¯ `&guess` æ¥ä½¿å…¶å¯å˜ã€‚

#### `read_line` å°†ç”¨æˆ·è¾“å…¥çš„ä»»ä½•å†…å®¹æ”¾å…¥æˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„å­—ç¬¦ä¸²ä¸­ï¼Œä½†å®ƒä¹Ÿè¿”å›žä¸€ä¸ª `Result` å€¼ã€‚ `Result` æ˜¯ä¸€ä¸ªæžšä¸¾ï¼Œé€šå¸¸ç§°ä¸ºæžšä¸¾ï¼Œå®ƒæ˜¯ä¸€ç§å¯ä»¥å¤„äºŽå¤šç§å¯èƒ½çŠ¶æ€ä¹‹ä¸€çš„ç±»åž‹ã€‚å°†æ¯ç§å¯èƒ½çš„çŠ¶æ€ç§°ä¸ºå˜ä½“ã€‚

è¿™äº› `Result` ç±»åž‹çš„ç›®çš„æ˜¯å¯¹é”™è¯¯å¤„ç†ä¿¡æ¯è¿›è¡Œç¼–ç ã€‚

`Result` ç±»åž‹çš„å€¼ä¸Žä»»ä½•ç±»åž‹çš„å€¼ä¸€æ ·ï¼Œéƒ½å®šä¹‰äº†æ–¹æ³•ã€‚ `Result` çš„å®žä¾‹æœ‰ä¸€ä¸ªå¯ä»¥è°ƒç”¨çš„ `expect` æ–¹æ³•ã€‚å¦‚æžœ `Result` çš„æ­¤å®žä¾‹æ˜¯ `Err` å€¼ï¼Œ `expect` å°†å¯¼è‡´ç¨‹åºå´©æºƒå¹¶æ˜¾ç¤ºæ‚¨ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `expect` æ–¹æ³•è¿”å›ž `Err` ï¼Œåˆ™å®ƒå¯èƒ½æ˜¯æ¥è‡ªåº•å±‚æ“ä½œç³»ç»Ÿçš„é”™è¯¯çš„ç»“æžœã€‚å¦‚æžœ `Result` çš„æ­¤å®žä¾‹æ˜¯ `Ok` å€¼ï¼Œåˆ™ `expect` å°†é‡‡ç”¨ `Ok` æ‰€ä¿å­˜çš„è¿”å›žå€¼å¹¶å°†è¯¥å€¼è¿”å›žç»™ä½ è¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨å®ƒã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¯¥å€¼æ˜¯ç”¨æˆ·è¾“å…¥ä¸­çš„å­—èŠ‚æ•°ã€‚

```rust
io::stdin()
        .read_line(&mut guess)
        .expect("Failed to read line"); // .expect("Failed to read line");
```

#### `{}` ç»„å¤§æ‹¬å·æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼šå°† `{}` æƒ³è±¡æˆå›ºå®šå€¼çš„å°èžƒèŸ¹é’³å­ã€‚æ‰“å°å˜é‡å€¼æ—¶ï¼Œå˜é‡åç§°å¯ä»¥æ”¾åœ¨å¤§æ‹¬å·å†…ã€‚æ‰“å°è¡¨è¾¾å¼æ±‚å€¼ç»“æžœæ—¶ï¼Œå°†ç©ºå¤§æ‹¬å·æ”¾åœ¨æ ¼å¼å­—ç¬¦ä¸²ä¸­ï¼Œç„¶åŽåœ¨æ ¼å¼å­—ç¬¦ä¸²åŽè·Ÿä¸Šä»¥é€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ï¼Œä»¥ç›¸åŒçš„é¡ºåºåœ¨æ¯ä¸ªç©ºå¤§æ‹¬å·å ä½ç¬¦ä¸­æ‰“å°ã€‚åœ¨å¯¹ `println!` çš„ä¸€æ¬¡è°ƒç”¨ä¸­æ‰“å°å˜é‡å’Œè¡¨è¾¾å¼çš„ç»“æžœå¦‚ä¸‹æ‰€ç¤º

```rust
let x = 5;
let y = 10;

println!("x = {x} and y + 2 = {}", y + 2);
// x = 5 and y + 2 = 12
```

#### ä½¿ç”¨ `crate` 

Rustä¸­çš„åŒ…ï¼ˆcrateï¼‰ä»£è¡¨äº†ä¸€ç³»åˆ—æºä»£ç æ–‡ä»¶çš„é›†åˆã€‚æˆ‘ä»¬å½“å‰æ­£åœ¨æž„å»ºçš„é¡¹ç›®æ˜¯ä¸€ä¸ªç”¨äºŽç”Ÿæˆå¯æ‰§è¡Œç¨‹åºçš„äºŒè¿›åˆ¶åŒ…ï¼ˆbinary crateï¼‰ï¼Œè€Œæˆ‘ä»¬å¼•ç”¨çš„randåŒ…åˆ™æ˜¯ä¸€ä¸ªç”¨äºŽå¤ç”¨åŠŸèƒ½çš„åº“åŒ…ï¼ˆlibrary crateï¼Œä»£ç åŒ…ï¼‰ã€‚

éœ€è¦ä¿®æ”¹ `Cargo.toml` æ–‡ä»¶ä»¥åŒ…å« `rand` åŒ…ä½œä¸ºä¾èµ–é¡¹ï¼Œåœ¨ `[dependencies]` éƒ¨é—¨æ ‡é¢˜ä¸‹æ–¹æ·»åŠ åŒ…çš„åå­—å’Œç‰ˆæœ¬å·

```rust
[dependencies]
rand = "0.8.5"
```

åœ¨ Cargo.toml æ–‡ä»¶ä¸­ï¼Œæ ‡å¤´åŽé¢çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯è¯¥éƒ¨åˆ†çš„ä¸€éƒ¨åˆ†ï¼Œä¸€ç›´æŒç»­åˆ°å¦ä¸€ä¸ªéƒ¨åˆ†å¼€å§‹ã€‚åœ¨ `[dependencies]` ä¸­ï¼Œæ‚¨å‘Šè¯‰ Cargo æ‚¨çš„é¡¹ç›®ä¾èµ–å“ªäº›å¤–éƒ¨ crateï¼Œä»¥åŠæ‚¨éœ€è¦è¿™äº› crate çš„å“ªäº›ç‰ˆæœ¬ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯­ä¹‰ç‰ˆæœ¬è¯´æ˜Žç¬¦ `0.8.5` æŒ‡å®š `rand` ç®±ã€‚ Cargo äº†è§£è¯­ä¹‰ç‰ˆæœ¬æŽ§åˆ¶ï¼ˆæœ‰æ—¶ç§°ä¸º SemVerï¼‰ï¼Œè¿™æ˜¯ç¼–å†™ç‰ˆæœ¬å·çš„æ ‡å‡†ã€‚è¯´æ˜Žç¬¦ `0.8.5` å®žé™…ä¸Šæ˜¯ `^0.8.5` çš„ç®€å†™ï¼Œè¿™æ„å‘³ç€è‡³å°‘ 0.8.5 ä½†ä½ŽäºŽ 0.9.0 çš„ä»»ä½•ç‰ˆæœ¬ã€‚

Cargo è®¤ä¸ºè¿™äº›ç‰ˆæœ¬å…·æœ‰ä¸Ž 0.8.5 ç‰ˆæœ¬å…¼å®¹çš„å…¬å…± APIï¼Œå¹¶ä¸”æ­¤è§„èŒƒç¡®ä¿æ‚¨å°†èŽ·å¾—ä»å°†ä½¿ç”¨æœ¬ç« ä¸­çš„ä»£ç è¿›è¡Œç¼–è¯‘çš„æœ€æ–°è¡¥ä¸ç‰ˆæœ¬ã€‚ä¸ä¿è¯ä»»ä½• 0.9.0 æˆ–æ›´é«˜ç‰ˆæœ¬å…·æœ‰ä¸Žä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨çš„ API ç›¸åŒçš„ APIã€‚

ç„¶åŽé‡æ–°æž„å»ºé¡¹ç›®ã€‚æž„å»ºåŽæ˜¾ç¤ºçš„ç‰ˆæœ¬å·å¯èƒ½ä¼šä¸Žæˆ‘ä»¬æŒ‡å®šçš„ä¸åŒï¼Œä½†å¤šäºäº† `SemVer` çš„çº¦å®šï¼Œå®ƒä»¬ä¼šä¸Žæˆ‘ä»¬çš„ä»£ç ä¿æŒå…¼å®¹ã€‚

çŽ°åœ¨ç¨‹åºæœ‰äº†ä¸€ä¸ªå¤–éƒ¨ä¾èµ–ï¼ŒCargoå¯ä»¥ä»Žæ³¨å†Œè¡¨ï¼ˆregistryï¼‰ä¸­èŽ·å–æ‰€æœ‰å¯ç”¨åº“çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯é€šå¸¸æ˜¯ä»Ž [crates.io](https://crates.io/) ä¸Šå¤åˆ¶è¿‡æ¥çš„ã€‚åœ¨Rustçš„ç”Ÿæ€ä¸­ï¼Œcrates.ioæ˜¯äººä»¬ç”¨äºŽåˆ†äº«å„ç§å„æ ·å¼€æºRusté¡¹ç›®çš„ç½‘ç«™ã€‚

æ›´æ–°æ³¨å†Œè¡¨åŽï¼ŒCargo æ£€æŸ¥ `[dependencies]` éƒ¨åˆ†å¹¶ä¸‹è½½åˆ—å‡ºçš„æ‰€æœ‰å°šæœªä¸‹è½½çš„ crateã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬åªå°† `rand` åˆ—ä¸ºä¾èµ–é¡¹ï¼Œä½† Cargo è¿˜èŽ·å–äº† `rand` ä¾èµ–çš„å…¶ä»– crate æ¥å·¥ä½œã€‚ä¸‹è½½åŒ…åŽï¼ŒRust ä¼šç¼–è¯‘å®ƒä»¬ï¼Œç„¶åŽä½¿ç”¨å¯ç”¨çš„ä¾èµ–é¡¹ç¼–è¯‘é¡¹ç›®ã€‚

ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè™½ç„¶æˆ‘ä»¬åªå°†randå¼•ç”¨ä¸ºä¾èµ–ï¼Œä½†Cargoå´é¢å¤–ä¸‹è½½äº†ä¸€ä»½libcçš„æ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºrandæœ¬èº«æ˜¯ä¾èµ–äºŽlibcæ¥å®Œæˆå·¥ä½œçš„ã€‚

#### Cargo.lock æ–‡ä»¶

Cargo å…·æœ‰ä¸€ç§æœºåˆ¶ï¼Œå¯ç¡®ä¿æ‚¨æˆ–å…¶ä»–ä»»ä½•äººæ¯æ¬¡æž„å»ºä»£ç æ—¶éƒ½å¯ä»¥é‡å»ºç›¸åŒçš„å·¥ä»¶ï¼šCargo å°†ä»…ä½¿ç”¨æ‚¨æŒ‡å®šçš„ä¾èµ–é¡¹ç‰ˆæœ¬ï¼Œç›´åˆ°æ‚¨å¦æœ‰æŒ‡ç¤ºã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä¸‹å‘¨ `rand` åŒ…çš„ 0.8.6 ç‰ˆæœ¬å°†å‘å¸ƒï¼Œè¯¥ç‰ˆæœ¬åŒ…å«ä¸€ä¸ªé‡è¦çš„é”™è¯¯ä¿®å¤ï¼Œä½†å®ƒä¹ŸåŒ…å«ä¸€ä¸ªä¼šç ´åæ‚¨çš„ä»£ç çš„å›žå½’ã€‚ä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼ŒRust åœ¨æ‚¨ç¬¬ä¸€æ¬¡è¿è¡Œ `cargo build` æ—¶åˆ›å»ºäº† Cargo.lock æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬çŽ°åœ¨å°†å…¶æ”¾ç½®åœ¨guessing_game ç›®å½•ä¸­ã€‚

å½“æ‚¨ç¬¬ä¸€æ¬¡æž„å»ºé¡¹ç›®æ—¶ï¼ŒCargo ä¼šæ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰ä¾èµ–é¡¹ç‰ˆæœ¬ï¼Œç„¶åŽå°†å®ƒä»¬å†™å…¥ Cargo.lock æ–‡ä»¶ã€‚å½“æ‚¨å°†æ¥æž„å»ºé¡¹ç›®æ—¶ï¼ŒCargo å°†çœ‹åˆ° Cargo.lock æ–‡ä»¶å­˜åœ¨ï¼Œå¹¶å°†ä½¿ç”¨å…¶ä¸­æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯å†æ¬¡æ‰§è¡Œç¡®å®šç‰ˆæœ¬çš„æ‰€æœ‰å·¥ä½œã€‚è¿™å¯ä»¥è®©æ‚¨è‡ªåŠ¨èŽ·å¾—å¯é‡å¤çš„æž„å»ºã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æ‚¨æ˜Žç¡®å‡çº§ä¹‹å‰ï¼Œæ‚¨çš„é¡¹ç›®å°†ä¿æŒåœ¨ 0.8.5ï¼Œè¿™è¦å½’åŠŸäºŽ Cargo.lock æ–‡ä»¶ã€‚ç”±äºŽ Cargo.lock æ–‡ä»¶å¯¹äºŽå¯é‡çŽ°çš„æž„å»ºéžå¸¸é‡è¦ï¼Œå› æ­¤å®ƒé€šå¸¸ä¼šä¸Žé¡¹ç›®ä¸­çš„å…¶ä½™ä»£ç ä¸€èµ·ç­¾å…¥æºä»£ç ç®¡ç†ã€‚

#### ä½¿ç”¨ `cargo update` æ›´æ–° `crate` 

å½“æ‚¨ç¡®å®žæƒ³è¦æ›´æ–° crate æ—¶ï¼ŒCargo ä¼šæä¾›å‘½ä»¤ `update` ï¼Œè¯¥å‘½ä»¤å°†å¿½ç•¥ Cargo.lock æ–‡ä»¶å¹¶æ‰¾å‡ºç¬¦åˆæ‚¨åœ¨ Cargo.toml ä¸­çš„è§„èŒƒçš„æ‰€æœ‰æœ€æ–°ç‰ˆæœ¬ã€‚ç„¶åŽ Cargo ä¼šå°†è¿™äº›ç‰ˆæœ¬å†™å…¥ Cargo.lock æ–‡ä»¶ã€‚å¦åˆ™ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒCargo å°†ä»…æŸ¥æ‰¾å¤§äºŽ 0.8.5 ä¸”å°äºŽ 0.9.0 çš„ç‰ˆæœ¬ã€‚å¦‚æžœ `rand` ç®±å·²å‘å¸ƒä¸¤ä¸ªæ–°ç‰ˆæœ¬ 0.8.6 å’Œ 0.9.0ï¼Œåˆ™è¿è¡Œ `cargo update` æ—¶æ‚¨å°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š

```shell
cargo update
    Updating crates.io index
    Updating rand v0.8.5 -> v0.8.6
```

Cargo å¿½ç•¥ 0.9.0 ç‰ˆæœ¬ã€‚æ­¤æ—¶ï¼Œæ‚¨è¿˜ä¼šæ³¨æ„åˆ° Cargo.lock æ–‡ä»¶ä¸­çš„æ›´æ”¹ï¼ŒæŒ‡å‡ºæ‚¨çŽ°åœ¨ä½¿ç”¨çš„ `rand` ç®±çš„ç‰ˆæœ¬æ˜¯ 0.8.6ã€‚è¦ä½¿ç”¨ `rand` ç‰ˆæœ¬ 0.9.0 æˆ– 0.9.x ç³»åˆ—ä¸­çš„ä»»ä½•ç‰ˆæœ¬ï¼Œæ‚¨å¿…é¡»å°† Cargo.toml æ–‡ä»¶æ›´æ–°ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼š

```toml
[dependencies]
rand = "0.9.0"
```

ä¸‹æ¬¡è¿è¡Œ `cargo build` æ—¶ï¼ŒCargo å°†æ›´æ–°å¯ç”¨ crate çš„æ³¨å†Œè¡¨ï¼Œå¹¶æ ¹æ®æ‚¨æŒ‡å®šçš„æ–°ç‰ˆæœ¬é‡æ–°è¯„ä¼°æ‚¨çš„ `rand` è¦æ±‚ã€‚

#### ç”Ÿæˆéšæœºæ•°

```rust
use rand::Rng;
...
let secret_number = rand::thread_rng().gen_range(1..=100);
```

é¢å¤–å¢žåŠ äº†ä¸€è¡Œuseè¯­å¥ï¼šuse rand::Rngã€‚è¿™é‡Œçš„Rngæ˜¯ä¸€ä¸ªtraitï¼ˆç‰¹å¾ï¼‰ï¼Œå®ƒå®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå™¨éœ€è¦å®žçŽ°çš„æ–¹æ³•é›†åˆã€‚ä¸ºäº†ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾å¼åœ°å°†å®ƒå¼•å…¥å½“å‰çš„ä½œç”¨åŸŸä¸­ã€‚

åœ¨ç¬¬ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨ `rand::thread_rng` å‡½æ•°ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„ç‰¹å®šéšæœºæ•°ç”Ÿæˆå™¨ï¼šä¸€ä¸ªä½äºŽå½“å‰æ‰§è¡Œçº¿ç¨‹æœ¬åœ°å¹¶ç”±æ“ä½œç³»ç»Ÿæ’­ç§çš„éšæœºæ•°ç”Ÿæˆå™¨ã€‚ç„¶åŽæˆ‘ä»¬è°ƒç”¨éšæœºæ•°ç”Ÿæˆå™¨ä¸Šçš„ `gen_range` æ–¹æ³•ã€‚æ­¤æ–¹æ³•ç”±æˆ‘ä»¬é€šè¿‡ `use rand::Rng;` è¯­å¥å¼•å…¥èŒƒå›´çš„ `Rng` ç‰¹å¾å®šä¹‰ã€‚ `gen_range` æ–¹æ³•é‡‡ç”¨èŒƒå›´è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œå¹¶åœ¨è¯¥èŒƒå›´å†…ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„èŒƒå›´è¡¨è¾¾å¼ç±»åž‹é‡‡ç”¨ `start..=end` å½¢å¼ï¼Œå¹¶ä¸”åŒ…å«ä¸‹é™å’Œä¸Šé™ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŒ‡å®š `1..=100` æ¥è¯·æ±‚ 1 åˆ° 100 ä¹‹é—´çš„æ•°å­—ã€‚

>   å¦‚æžœæƒ³çŸ¥é“ä½¿ç”¨å“ªäº›ç‰¹å¾ä»¥åŠè¦ä»ŽåŒ…ä¸­è°ƒç”¨å“ªäº›æ–¹æ³•å’Œå‡½æ•°ï¼Œå› æ­¤æ¯ä¸ªåŒ…éƒ½æœ‰åŒ…å«ä½¿ç”¨è¯´æ˜Žçš„æ–‡æ¡£ã€‚ Cargo çš„å¦ä¸€ä¸ªå·§å¦™åŠŸèƒ½æ˜¯è¿è¡Œ `cargo doc --open` å‘½ä»¤å°†åœ¨æœ¬åœ°æž„å»ºæ‰€æœ‰ä¾èµ–é¡¹æä¾›çš„æ–‡æ¡£å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨å¯¹ `rand` åŒ…ä¸­çš„å…¶ä»–åŠŸèƒ½æ„Ÿå…´è¶£ï¼Œè¯·è¿è¡Œ `cargo doc --open` å¹¶å•å‡»å·¦ä¾§è¾¹æ ä¸­çš„ `rand` ã€‚

#### æ¯”è¾ƒ

æˆ‘ä»¬æ·»åŠ å¦ä¸€ä¸ª `use` è¯­å¥ï¼Œå°†åä¸º `std::cmp::Ordering` çš„ç±»åž‹ä»Žæ ‡å‡†åº“å¼•å…¥ä½œç”¨åŸŸã€‚ `Ordering` ç±»åž‹æ˜¯å¦ä¸€ä¸ªæžšä¸¾ï¼Œå…·æœ‰å˜ä½“ `Less` ã€ `Greater` å’Œ `Equal` ã€‚è¿™æ˜¯æ¯”è¾ƒä¸¤ä¸ªå€¼æ—¶å¯èƒ½å‡ºçŽ°çš„ä¸‰ç§ç»“æžœã€‚

```rust
match guess.cmp(&secret_number){
    Ordering::Less => println!("Too Small!"),
    Ordering:: Greater => println!("Too Big!"),
    Ordering::Equal => println!("You Win!")
}
```

Rust æ‹¥æœ‰å¼ºå¤§çš„é™æ€ç±»åž‹ç³»ç»Ÿã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿæœ‰ç±»åž‹æŽ¨æ–­ã€‚å½“æˆ‘ä»¬ç¼–å†™ `let mut guess = String::new()` æ—¶ï¼ŒRust èƒ½å¤ŸæŽ¨æ–­å‡º `guess` åº”è¯¥æ˜¯ `String` å¹¶ä¸”æ²¡æœ‰è®©æˆ‘ä»¬ç¼–å†™ç±»åž‹ã€‚å¦ä¸€æ–¹é¢ï¼Œ `secret_number` æ˜¯æ•°å­—ç±»åž‹ã€‚ Rust çš„ä¸€äº›æ•°å­—ç±»åž‹çš„å€¼å¯ä»¥åœ¨ 1 åˆ° 100 ä¹‹é—´ï¼š `i32` ï¼Œä¸€ä¸ª 32 ä½æ•°å­—ï¼› `u32` ï¼Œæ— ç¬¦å· 32 ä½æ•°å­—ï¼› `i64` ï¼Œä¸€ä¸ª 64 ä½æ•°å­—ï¼›ä»¥åŠå…¶ä»–äººã€‚é™¤éžå¦æœ‰æŒ‡å®šï¼ŒRust é»˜è®¤ä¸º `i32` ï¼Œå®ƒæ˜¯ `secret_number` çš„ç±»åž‹ï¼Œé™¤éžæ‚¨åœ¨å…¶ä»–åœ°æ–¹æ·»åŠ ç±»åž‹ä¿¡æ¯ï¼Œè¿™ä¼šå¯¼è‡´ Rust æŽ¨æ–­å‡ºä¸åŒçš„æ•°å­—ç±»åž‹ã€‚é”™è¯¯çš„åŽŸå› æ˜¯ Rust æ— æ³•æ¯”è¾ƒå­—ç¬¦ä¸²å’Œæ•°å­—ç±»åž‹ã€‚

Rust å…è®¸æˆ‘ä»¬ç”¨æ–°å€¼æ¥éšè— `guess` çš„å…ˆå‰å€¼ï¼Œè¿™å¾ˆæœ‰å¸®åŠ©ã€‚é˜´å½±å…è®¸æˆ‘ä»¬é‡ç”¨ `guess` å˜é‡åç§°ï¼Œè€Œä¸æ˜¯å¼ºè¿«æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå”¯ä¸€çš„å˜é‡ï¼Œä¾‹å¦‚ `guess_str` å’Œ `guess` ã€‚å½“æƒ³è¦å°†å€¼ä»Žä¸€ç§ç±»åž‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»åž‹æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

`String` å®žä¾‹ä¸Šçš„ `trim` æ–¹æ³•å°†æ¶ˆé™¤å¼€å¤´å’Œç»“å°¾çš„ä»»ä½•ç©ºæ ¼ã€‚`trim` æ–¹æ³•æ¶ˆé™¤ `\n` æˆ– `\r\n` ï¼Œç»“æžœåªæ˜¯ `5` ã€‚

å­—ç¬¦ä¸²ä¸Šçš„ `parse` æ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¦ä¸€ç§ç±»åž‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒä»Žå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ `let guess: u32` å‘Šè¯‰ Rust æˆ‘ä»¬æƒ³è¦çš„ç¡®åˆ‡æ•°å­—ç±»åž‹ã€‚

æ­¤ç¤ºä¾‹ç¨‹åºä¸­çš„ `u32` æ³¨é‡Šä»¥åŠä¸Ž `secret_number` çš„æ¯”è¾ƒæ„å‘³ç€ Rust ä¼šæŽ¨æ–­ `secret_number` ä¹Ÿåº”è¯¥æ˜¯ `u32` ã€‚

`parse` æ–¹æ³•ä»…é€‚ç”¨äºŽé€»è¾‘ä¸Šå¯ä»¥è½¬æ¢ä¸ºæ•°å­—çš„å­—ç¬¦ï¼Œå› æ­¤å¾ˆå®¹æ˜“å¯¼è‡´é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå­—ç¬¦ä¸²åŒ…å« `AðŸ‘%` ï¼Œåˆ™æ— æ³•å°†å…¶è½¬æ¢ä¸ºæ•°å­—ã€‚å› ä¸ºå®ƒå¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥ `parse` æ–¹æ³•è¿”å›ž `Result` ç±»åž‹ã€‚

```rust
let guess: u32 = guess.trim().parse().expect("Please type a number!");
...
match guess.cmp(&secret_number){
    Ordering::Less => println!("Too Small!"),
    Ordering:: Greater => println!("Too Big!"),
    Ordering::Equal => println!("You Win!")
}
```

#### loop

`loop` å…³é”®å­—åˆ›å»ºæ— é™å¾ªçŽ¯ã€‚

åœ¨ `You win!` ä¹‹åŽæ·»åŠ  `break` è¡Œä¼šä½¿ç¨‹åºåœ¨ç”¨æˆ·æ­£ç¡®çŒœæµ‹ç§˜å¯†æ•°å­—æ—¶é€€å‡ºå¾ªçŽ¯ã€‚é€€å‡ºå¾ªçŽ¯ä¹Ÿæ„å‘³ç€é€€å‡ºç¨‹åºï¼Œå› ä¸ºå¾ªçŽ¯æ˜¯ `main` çš„æœ€åŽä¸€éƒ¨åˆ†ã€‚

```rust
loop {
    println!("Please input your guess.");

    match guess.cmp(&secret_number) {
        Ordering::Less => println!("Too Small!"),
        Ordering::Greater => println!("Too Big!"),
        Ordering::Equal => {
            println!("You Win!");
            break;
        },
    }
}
```

#### å¤„ç†æ— æ•ˆè¾“å…¥

ä¸ºäº†è¿›ä¸€æ­¥å®Œå–„æ¸¸æˆçš„è¡Œä¸ºï¼Œè®©æ¸¸æˆå¿½ç•¥éžæ•°å­—ä»¥ä¾¿ç”¨æˆ·å¯ä»¥ç»§ç»­çŒœæµ‹ï¼Œè€Œä¸æ˜¯åœ¨ç”¨æˆ·è¾“å…¥éžæ•°å­—æ—¶ä½¿ç¨‹åºå´©æºƒã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ”¹å°† `guess` ä»Ž `String` è½¬æ¢ä¸º `u32` çš„è¡Œæ¥å®žçŽ°è¿™ä¸€ç‚¹ã€‚

```rust
let guess: u32 = match guess.trim().parse(){
    Ok(num) => num,
    Err(_) => continue,
};
```

æˆ‘ä»¬ä»Ž `expect` è°ƒç”¨åˆ‡æ¢åˆ° `match` è¡¨è¾¾å¼ï¼Œä»¥ä»Žå› é”™è¯¯è€Œå´©æºƒè½¬å‘å¤„ç†é”™è¯¯ã€‚è¯·è®°ä½ï¼Œ `parse` è¿”å›ž `Result` ç±»åž‹ï¼Œè€Œ `Result` æ˜¯ä¸€ä¸ªå…·æœ‰å˜ä½“ `Ok` å’Œ `Err` çš„æžšä¸¾ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ `match` è¡¨è¾¾å¼ï¼Œå°±åƒæˆ‘ä»¬å¯¹ `cmp` æ–¹æ³•çš„ `Ordering` ç»“æžœæ‰€åšçš„é‚£æ ·ã€‚

å¦‚æžœ `parse` èƒ½å¤ŸæˆåŠŸå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå®ƒå°†è¿”å›žåŒ…å«ç»“æžœæ•°å­—çš„ `Ok` å€¼ã€‚è¯¥ `Ok` å€¼å°†åŒ¹é…ç¬¬ä¸€ä¸ªæ‰‹è‡‚çš„æ¨¡å¼ï¼Œå¹¶ä¸” `match` è¡¨è¾¾å¼å°†ä»…è¿”å›ž `parse` ç”Ÿæˆå¹¶æ”¾å…¥å…¶ä¸­çš„ `num` å€¼ `Ok` å€¼ã€‚è¯¥æ•°å­—æœ€ç»ˆå°†ä½äºŽæˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„æ–° `guess` å˜é‡ä¸­æˆ‘ä»¬æƒ³è¦çš„ä½ç½®ã€‚

å¦‚æžœ `parse` æ— æ³•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå®ƒå°†è¿”å›žä¸€ä¸ª `Err` å€¼ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³é”™è¯¯çš„æ›´å¤šä¿¡æ¯ã€‚ `Err` å€¼ä¸Žç¬¬ä¸€ä¸ª `match` è‡‚ä¸­çš„ `Ok(num)` æ¨¡å¼ä¸åŒ¹é…ï¼Œä½†ä¸Žç¬¬äºŒä¸ªè‡‚ä¸­çš„ `Err(_)` æ¨¡å¼åŒ¹é…ã€‚ä¸‹åˆ’çº¿ `_` æ˜¯ä¸€ä¸ªåŒ…ç½—ä¸‡è±¡çš„å€¼ï¼›åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¯´æˆ‘ä»¬æƒ³è¦åŒ¹é…æ‰€æœ‰ `Err` å€¼ï¼Œæ— è®ºå®ƒä»¬é‡Œé¢æœ‰ä»€ä¹ˆä¿¡æ¯ã€‚å› æ­¤ï¼Œç¨‹åºå°†æ‰§è¡Œç¬¬äºŒä¸ªåˆ†æ”¯çš„ä»£ç  `continue` ï¼Œå®ƒå‘Šè¯‰ç¨‹åºè½¬åˆ° `loop` çš„ä¸‹ä¸€æ¬¡è¿­ä»£å¹¶è¦æ±‚è¿›è¡Œå¦ä¸€ä¸ªçŒœæµ‹ã€‚å› æ­¤ï¼Œå®žé™…ä¸Šï¼Œç¨‹åºä¼šå¿½ç•¥ `parse` å¯èƒ½é‡åˆ°çš„æ‰€æœ‰é”™è¯¯ï¼

# å®Œæ•´ä»£ç 

```rust
use rand::Rng;
use std::cmp::Ordering;
use std::io;

fn main() {
    println!("Guessing the number!");

    let secret_number = rand::thread_rng().gen_range(1..=100);

    loop {
        println!("Please input your guess.");

        let mut guess = String::new();

        io::stdin()
            .read_line(&mut guess)
            .expect("Failed to read line");

        let guess: u32 = match guess.trim().parse(){
            Ok(num) => num,
            Err(_) => {
                println!("Please type a number!");
                continue;
            },
        };

        println!("Your guessed: {guess}");

        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too Small!"),
            Ordering::Greater => println!("Too Big!"),
            Ordering::Equal => {
                println!("You Win!");
                break;
            },
        }
    }
}
```

